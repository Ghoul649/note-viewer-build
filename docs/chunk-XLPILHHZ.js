import{G as m,I as b,R as x,V as y,a as p,aa as N,e as d,g,ka as v,nb as M,ya as w}from"./chunk-ONATRPPM.js";var I=(()=>{let e=class e{constructor(){this.changes=new g,this.subscribers={}}subscribe(n){if(n.path in this.subscribers)throw new Error("There is already a subscription");return this.subscribers[n.path]=n,this.changes.next(),new d(()=>{delete this.subscribers[n.path],this.changes.next()})}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var U=(()=>{let e=class e{constructor(n){this._service=n,this.disabled=!1,this.click=new N,this._inialized=!1}ngOnInit(){this._subscribe(),this._inialized=!0}ngOnChanges(n){this._inialized&&(n.path&&this._subscribe(),n.disabled&&this._service.changes.next())}ngOnDestroy(){this._subscription?.unsubscribe()}_subscribe(){this._subscription?.unsubscribe(),this._subscription=this._service.subscribe(this)}};e.\u0275fac=function(s){return new(s||e)(v(I))},e.\u0275dir=x({type:e,selectors:[["app-toolbar-action"]],inputs:{path:"path",disabled:[2,"disabled","disabled",M]},outputs:{click:"click"},standalone:!0,features:[w,y]});let t=e;return t})();var A=440*Math.pow(2,-.041666666666666664),q=440*Math.pow(2,.5/12);var B={C:0,D:2,E:4,F:5,G:7,A:9,B:11},f={0:"C",2:"D",4:"E",5:"F",7:"G",9:"A",11:"B"};function F(t=440){return Math.floor(Math.log2(8e3/t)*12+9)}function T(t=440){return Math.ceil(Math.log2(16/t)*12+9)}function k(t,e=440){let r=typeof t=="string"?c(t):t;return e*Math.pow(2,(r-9)/12)}function c(t){let e=/^([A-G])([#b]?)(\d)$/.exec(t);if(!e)throw new Error(`Unknown note ${t}`);return B[e[1]]+(e[2]==="#"?1:e[2]==="b"?-1:0)+(Number.parseInt(e[3])-4)*12}function $(t){let e=t?.start??T(t?.tuning??440),r=t?.end??F(t?.tuning??440),n=t?.density??1,s=typeof e=="string"?c(e):e,h=typeof r=="string"?c(r):r,u=[];for(let a=s;a<=h;a++)for(let i=0;i<n;i++)u.push(Math.round((a-.5+.5/n+i/n)*1e3)/1e3);return u}function C(t,e=440){let r=(Math.round(t)%12+12)%12,n=f[r]??f[r-1]+"#",s=Math.floor(Math.round(t)/12)+4;return{index:t,name:`${n}${Math.floor(Math.round(t)/12)+4}`,isBlack:!f[r],baseNote:n,octave:s,tuning:e}}function z(t){let e=t?.tuning??440,r=t?.start??T(e),n=t?.end??F(e),s=t?.density??1,h=typeof r=="string"?c(r):r,u=typeof n=="string"?c(n):n,a=[];for(let i=h;i<=u;i++)for(let l=0;l<s;l++)a.push(Math.round((i-.5+.5/s+l/s)*1e3)/1e3);return a.map(i=>C(i,e))}function J(){let t=/^[A-G][#b]{0,1}[0-9]$/;return e=>t.exec(e.value)?null:{invalidNoteFormat:!0}}var tt=new b("AnalyzerOptions"),D={start:"C2",end:"B8",tuning:440,cycles:32,density:5,tickLength:256},E=class{constructor(e){let r=p(p({},D),e);this.notes=z({start:r.start,end:r.end,tuning:r.tuning}).reverse(),this.count=this.notes.length,this.startNote=this.notes[this.count-1],this.endNote=this.notes[0],this.tickLength=r.tickLength,this.points=$(r).reverse().map(n=>k(n,r.tuning)),this.analyzingSize=this.points.length,this.cycles=r.cycles,this.tuning=r.tuning}};export{I as a,U as b,J as c,tt as d,D as e,E as f};
